<!DOCTYPE html>
<html>
<head>
  <title>Vekii</title>
  <link href="/assets/application.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/frontpage.css?body=1" media="screen" rel="stylesheet" type="text/css" />
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/frontpage.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-1.7.1.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
  <meta content="authenticity_token" name="csrf-param" />
<meta content="y/F121YGj/MaonPBGREZrW/6hEtMwafGmJv7I0eI1/c=" name="csrf-token" />
</head>
<body>
	 <form action="https://accounts.google.com/o/oauth2/auth?client_id=908038792880-vm3862hmpnp7u6gnmgd8104g8u7r1sr1.apps.googleusercontent.com&amp;redirect_uri=http://localhost:3000/oauth2callback&amp;scope=https://gdata.youtube.com&amp;response_type=token" class="button_to" method="post"><div><input type="submit" value="Google Login" /><input name="authenticity_token" type="hidden" value="y/F121YGj/MaonPBGREZrW/6hEtMwafGmJv7I0eI1/c=" /></div></form>

<button id="google-login" value="load()" id="load_basic" >
	Google Login
</button>

</br>

<button id="add-friend">
	Add Friend
</button>

<ul id="friends-list">
</ul>

<ul id="friends-list">	
</ul>

<div id="page-wrap">
    		<div id="header">
    			<h1>Make AJAX Calls with jQuery</h1>
    		</div>
			
			<div id="load-div" class="functions">
				<span>load()</span>
				<input type="submit" value="load()" id="load_basic" />
				<input type="submit" value="load() #DOM" id="load_dom" />
				<input type="submit" value="load() GET" id="load_get" />
				<input type="submit" value="load() POST" id="load_post" />
				<input type="submit" value="load() callback" id="load_callback" />
			</div>
			
			<div id="get-json-div"  class="functions">
				<span>$.getJSON()</span>
				<form id="getJSONForm">
					<input type="text" value="Avanti" id="q" />
					<input type="submit" value="Detect Language" id="getJSON" />
				</form>
			</div>
			
			<div id="get-script-div"  class="functions">
				<span>$.getScript()</span>
				<input type="submit" value="Load a Remote Script" id="getScript" />
			</div>
			
			<div id="get-div"  class="functions">
				<span>$.get()</span>
				<input type="submit" value="$.get()" id="get" />
			</div>
			
			<div id="post-div" class="functions">
				<span>$.post()</span>
				<input type="submit" value="$.post()" id="post" />
			</div>
			
			<div id="result"  class="functions">
				
			</div>
		</div>


<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>

<script type="text/javascript">
	$.ajaxSetup ({
		cache: false
	});
	var ajax_load = "<img class='loading' src='img/load.gif' alt='loading...' />";
	
//	load() functions
	var loadUrl = "ajax/load.php";
	$("#load_basic").click(function(){
		$("#result").html(ajax_load).load(loadUrl);
	});
	
	$("#load_dom").click(function(){
		$("#result")
			.html(ajax_load)
			.load(loadUrl + " #picture");
	});
	
	$("#load_get").click(function(){
		$("#result")
			.html(ajax_load)
			.load(loadUrl, "language=php&version=5");
	});
	
	$("#load_post").click(function(){
		$("#result")
			.html(ajax_load)
			.load(loadUrl, {language: "php", version: 5});
	});
	
	$("#load_callback").click(function(){
		$("#result")
			.html(ajax_load)
			.load(loadUrl, null, function(responseText){
				alert("Response:\n" + responseText);
			});
	});
	
//	$.getJSON()
	var jsonUrl = "ajax/json.php";
	$("#getJSONForm").submit(function(){
		var q = $("#q").val();
		if (q.length == 0) {
			$("#q").focus();
		} else {
			$("#result").html(ajax_load);
			$.getJSON(
				jsonUrl,
//				"q="+q,
				{q: q},
				function(json) {
					var result = "<p>Language code is \"<strong>" + json.responseData.language + "</strong>\"</p>";
					$("#result").html(result);
				}
			);
		}
		return false;
	});
	
//	$.getScript()
	var scriptUrl = "ajax/script.php";
	$("#getScript").click(function(){
		$("#result").html(ajax_load);
		$.getScript(scriptUrl, function(){
			$("#result").html("");
		});
	});

//	$.get()
	$("#get").click(function(){
		$("#result").html(ajax_load);
		$.get(
			loadUrl,
			{language: "php", version: 5},
			function(responseText){
				$("#result").html(responseText);
			},
			"html"
		);
	});
	
//	$.post()
	$("#post").click(function(){
		$("#result").html(ajax_load);
		$.post(
			loadUrl,
			{language: "php", version: 5},
			function(responseText){
				$("#result").html(responseText);
			},
			"html"
		);
	});
</script>

<script type="text/javascript">
(function ($) {
  
  Friend = Backbone.Model.extend({
    //Create a model to hold friend atribute
    name: null
  });
  
  Friends = Backbone.Collection.extend({
    //This is our Friends collection and holds our Friend models
    initialize: function (models, options) {
      this.bind("add", options.view.addFriendLi);
      //Listen for new additions to the collection and call a view function if so
    }
  });
  
  AppView = Backbone.View.extend({
    el: $("body"),
    initialize: function () {
      this.friends = new Friends( null, { view: this });
      //Create a friends collection when the view is initialized.
      //Pass it a reference to this view to create a connection between the two
    },
    events: {
      "click #add-friend":  "showPrompt",
	  "click #google-login":  "getAccessToken",
    },
    showPrompt: function () {
      var friend_name = prompt("Who is your friend?");
      var friend_model = new Friend({ name: friend_name });
      //Add a new friend model to our friend collection
      this.friends.add( friend_model );
    },
	getAccessToken: function() {
		$.ajax({
		  url: 'http://www.google.com',
		  success:function(data){
		    alert(data);
		  }
		});
		
		
		$("#result").html(ajax_load).load(loadUrl);
		$("#friends-list").append("<li>" + "getAccessToken called" + "</li>");
	jQuery.ajax("https://accounts.google.com/o/oauth2/auth?client_id=908038792880-vm3862hmpnp7u6gnmgd8104g8u7r1sr1.apps.googleusercontent.com&redirect_uri=http://localhost:3000/oauth2callback&scope=https://gdata.youtube.com&response_type=token");
	},
    addFriendLi: function (model) {
      //The parameter passed is a reference to the model that was added
      $("#friends-list").append("<li>" + model.get('name') + "</li>");
      //Use .get to receive attributes of the model
    }
  });
  
  var appview = new AppView;
})(jQuery);
</script>
	
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
	<script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js"></script>
	<script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>
</body>
</html>
